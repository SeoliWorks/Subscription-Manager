{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/info-gather/%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF/subscription-manager/lib/constants.ts"],"sourcesContent":["export const SUBSCRIPTION_CYCLES = {\n  monthly: 'monthly',\n  yearly: 'yearly',\n} as const;\n\nexport const CYCLE_LABELS = {\n  [SUBSCRIPTION_CYCLES.monthly]: '月額',\n  [SUBSCRIPTION_CYCLES.yearly]: '年額',\n};\n\n// 通貨設定\n// decimals: DB保存時の倍率 (例: 2なら x100)\nexport const CURRENCIES = {\n  JPY: { code: 'JPY', symbol: '¥', decimals: 0 },\n  USD: { code: 'USD', symbol: '$', decimals: 2 },\n  EUR: { code: 'EUR', symbol: '€', decimals: 2 },\n} as const;\n\nexport type CurrencyCode = keyof typeof CURRENCIES;\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,sBAAsB;IACjC,SAAS;IACT,QAAQ;AACV;AAEO,MAAM,eAAe;IAC1B,CAAC,oBAAoB,OAAO,CAAC,EAAE;IAC/B,CAAC,oBAAoB,MAAM,CAAC,EAAE;AAChC;AAIO,MAAM,aAAa;IACxB,KAAK;QAAE,MAAM;QAAO,QAAQ;QAAK,UAAU;IAAE;IAC7C,KAAK;QAAE,MAAM;QAAO,QAAQ;QAAK,UAAU;IAAE;IAC7C,KAAK;QAAE,MAAM;QAAO,QAAQ;QAAK,UAAU;IAAE;AAC/C"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":["file:///home/info-gather/%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF/subscription-manager/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\nimport { type Subscription } from \"@/db/schema\"\nimport { SUBSCRIPTION_CYCLES, CURRENCIES, type CurrencyCode } from \"./constants\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n\n/**\n * クライアントのローカル日付を \"YYYY-MM-DD\" 形式で取得する\n * ブラウザのロケール実装に依存せず、確実にフォーマットする\n */\nexport function getLocalTodayString(): string {\n  const d = new Date();\n  const year = d.getFullYear();\n  const month = String(d.getMonth() + 1).padStart(2, '0');\n  const day = String(d.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n}\n\n/**\n * DB保存値(整数)を、UI表示用の数値(小数)に戻す\n * 表示用のため割り算を行う\n */\nexport function convertAmountFromMinorUnits(amount: number, currency: string): number {\n  const config = CURRENCIES[currency as CurrencyCode] ?? CURRENCIES.JPY;\n  return amount / Math.pow(10, config.decimals);\n}\n\n/**\n * UI入力値(小数含む数値)を、DB保存用の整数(最小単位)に変換\n * IEEE 754 浮動小数点誤差を防ぐため、文字列操作で小数点を移動させる\n * 例: 10.99 (USD) -> \"10.99\" -> \"1099\"\n */\nexport function convertAmountToMinorUnits(amount: number, currency: string): number {\n  const config = CURRENCIES[currency as CurrencyCode] ?? CURRENCIES.JPY;\n  \n  // 小数点以下の桁数を固定した文字列を作成 (四捨五入の効果もある)\n  const fixedString = amount.toFixed(config.decimals);\n  \n  // 小数点を取り除いて整数化\n  const integerString = fixedString.replace('.', '');\n  \n  return parseInt(integerString, 10);\n}\n\n/**\n * [DB用] DBの整数値を受け取り、自動的に小数に戻してフォーマットする\n */\nexport function formatCurrency(amountFromDb: number, currency: string): string {\n  const actualAmount = convertAmountFromMinorUnits(amountFromDb, currency);\n  return formatDisplayPrice(actualAmount, currency);\n}\n\n/**\n * [表示用] すでに計算済みの数値を受け取り、通貨フォーマットする\n */\nexport function formatDisplayPrice(amount: number, currency: string): string {\n  return new Intl.NumberFormat('ja-JP', {\n    style: 'currency',\n    currency: currency,\n  }).format(amount);\n}\n\nexport type AggregatedTotals = {\n  [key in CurrencyCode]: number;\n};\n\n/**\n * 全通貨の月額換算合計を計算して返す\n * 戻り値例: { JPY: 5000, USD: 10.50, EUR: 0 }\n */\nexport function calculateMonthlyAggregations(subscriptions: Subscription[]): AggregatedTotals {\n  const totals: AggregatedTotals = {\n    JPY: 0,\n    USD: 0,\n    EUR: 0,\n  };\n\n  subscriptions.forEach((sub) => {\n    const currency = sub.currency as CurrencyCode;\n    if (!totals.hasOwnProperty(currency)) return;\n\n    const actualPrice = convertAmountFromMinorUnits(sub.price, currency);\n    \n    let monthlyPrice = actualPrice;\n    if (sub.cycle === SUBSCRIPTION_CYCLES.yearly) {\n      // 年額の12分割時に発生する無限小数を、項目ごとに小数第2位で丸めて確定させる\n      monthlyPrice = Math.round((actualPrice / 12) * 100) / 100;\n    }\n\n    totals[currency] += monthlyPrice;\n  });\n\n  return totals;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AAEA;;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB;AAMO,SAAS;IACd,MAAM,IAAI,IAAI;IACd,MAAM,OAAO,EAAE,WAAW;IAC1B,MAAM,QAAQ,OAAO,EAAE,QAAQ,KAAK,GAAG,QAAQ,CAAC,GAAG;IACnD,MAAM,MAAM,OAAO,EAAE,OAAO,IAAI,QAAQ,CAAC,GAAG;IAC5C,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK;AAClC;AAMO,SAAS,4BAA4B,MAAc,EAAE,QAAgB;IAC1E,MAAM,SAAS,8HAAU,CAAC,SAAyB,IAAI,8HAAU,CAAC,GAAG;IACrE,OAAO,SAAS,KAAK,GAAG,CAAC,IAAI,OAAO,QAAQ;AAC9C;AAOO,SAAS,0BAA0B,MAAc,EAAE,QAAgB;IACxE,MAAM,SAAS,8HAAU,CAAC,SAAyB,IAAI,8HAAU,CAAC,GAAG;IAErE,mCAAmC;IACnC,MAAM,cAAc,OAAO,OAAO,CAAC,OAAO,QAAQ;IAElD,eAAe;IACf,MAAM,gBAAgB,YAAY,OAAO,CAAC,KAAK;IAE/C,OAAO,SAAS,eAAe;AACjC;AAKO,SAAS,eAAe,YAAoB,EAAE,QAAgB;IACnE,MAAM,eAAe,4BAA4B,cAAc;IAC/D,OAAO,mBAAmB,cAAc;AAC1C;AAKO,SAAS,mBAAmB,MAAc,EAAE,QAAgB;IACjE,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QACpC,OAAO;QACP,UAAU;IACZ,GAAG,MAAM,CAAC;AACZ;AAUO,SAAS,6BAA6B,aAA6B;IACxE,MAAM,SAA2B;QAC/B,KAAK;QACL,KAAK;QACL,KAAK;IACP;IAEA,cAAc,OAAO,CAAC,CAAC;QACrB,MAAM,WAAW,IAAI,QAAQ;QAC7B,IAAI,CAAC,OAAO,cAAc,CAAC,WAAW;QAEtC,MAAM,cAAc,4BAA4B,IAAI,KAAK,EAAE;QAE3D,IAAI,eAAe;QACnB,IAAI,IAAI,KAAK,KAAK,uIAAmB,CAAC,MAAM,EAAE;YAC5C,yCAAyC;YACzC,eAAe,KAAK,KAAK,CAAC,AAAC,cAAc,KAAM,OAAO;QACxD;QAEA,MAAM,CAAC,SAAS,IAAI;IACtB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///home/info-gather/%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF/subscription-manager/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"skeleton\"\n      className={cn(\"bg-accent animate-pulse rounded-md\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EAAE,SAAS,EAAE,GAAG,OAAoC;IACpE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,sCAAsC;QACnD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///home/info-gather/%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF/subscription-manager/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 244, "column": 0}, "map": {"version":3,"sources":["file:///home/info-gather/%E3%83%9F%E3%83%A5%E3%83%BC%E3%82%B8%E3%83%83%E3%82%AF/subscription-manager/app/loading.tsx"],"sourcesContent":["import { Skeleton } from \"@/components/ui/skeleton\"\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\"\n\nexport default function Loading() {\n  return (\n    <div className=\"container mx-auto py-10 space-y-8\">\n      <div className=\"flex justify-between items-center\">\n        <Skeleton className=\"h-9 w-48\" /> {/* Title */}\n        <Skeleton className=\"h-10 w-32\" /> {/* Button */}\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n        {/* KPI Cards Skeletons */}\n        {[1, 2, 3].map((i) => (\n          <Card key={i}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n              <Skeleton className=\"h-4 w-24\" />\n              <Skeleton className=\"h-4 w-4 rounded-full\" />\n            </CardHeader>\n            <CardContent>\n              <Skeleton className=\"h-8 w-20 mb-1\" />\n              <Skeleton className=\"h-3 w-32\" />\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      <Card>\n        <CardHeader>\n          <Skeleton className=\"h-6 w-40\" />\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n             {/* List Rows Skeletons */}\n            {[1, 2, 3, 4].map((i) => (\n              <div key={i} className=\"flex items-center justify-between\">\n                <div className=\"space-y-2\">\n                  <Skeleton className=\"h-4 w-32\" />\n                  <Skeleton className=\"h-3 w-20\" />\n                </div>\n                <Skeleton className=\"h-8 w-8 rounded-full\" />\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC,yIAAQ;wBAAC,WAAU;;;;;;oBAAa;kCACjC,8OAAC,yIAAQ;wBAAC,WAAU;;;;;;oBAAc;;;;;;;0BAGpC,8OAAC;gBAAI,WAAU;0BAEZ;oBAAC;oBAAG;oBAAG;iBAAE,CAAC,GAAG,CAAC,CAAC,kBACd,8OAAC,iIAAI;;0CACH,8OAAC,uIAAU;gCAAC,WAAU;;kDACpB,8OAAC,yIAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC,yIAAQ;wCAAC,WAAU;;;;;;;;;;;;0CAEtB,8OAAC,wIAAW;;kDACV,8OAAC,yIAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC,yIAAQ;wCAAC,WAAU;;;;;;;;;;;;;uBAPb;;;;;;;;;;0BAaf,8OAAC,iIAAI;;kCACH,8OAAC,uIAAU;kCACT,cAAA,8OAAC,yIAAQ;4BAAC,WAAU;;;;;;;;;;;kCAEtB,8OAAC,wIAAW;kCACV,cAAA,8OAAC;4BAAI,WAAU;sCAEZ;gCAAC;gCAAG;gCAAG;gCAAG;6BAAE,CAAC,GAAG,CAAC,CAAC,kBACjB,8OAAC;oCAAY,WAAU;;sDACrB,8OAAC;4CAAI,WAAU;;8DACb,8OAAC,yIAAQ;oDAAC,WAAU;;;;;;8DACpB,8OAAC,yIAAQ;oDAAC,WAAU;;;;;;;;;;;;sDAEtB,8OAAC,yIAAQ;4CAAC,WAAU;;;;;;;mCALZ;;;;;;;;;;;;;;;;;;;;;;;;;;;AAaxB"}}]
}